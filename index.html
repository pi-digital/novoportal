<head>
<link rel="stylesheet" type="text/css" href="theme.css">
<script src="theme.js"></script>
</head>
<svg height="0" width="0">
  <symbol id="twitter" viewBox="0 0 800 800">
      <path d="M679 239s-21 34-55 57c7 156-107 329-314 329-103 0-169-50-169-50s81 17 163-45c-83-5-103-77-103-77s23 6 50-2c-93-23-89-110-89-110s23 14 50 14c-84-65-34-148-34-148s76 107 228 116c-22-121 117-177 188-101 37-6 71-27 71-27s-12 41-49 61c30-2 63-17 63-17z"/>
   </symbol> 
   <symbol id="facebook" viewBox="0 0 800 800">
      <path d="M445 643h-90V419h-75v-87h75v-64q0-55 32-86 30-29 80-29 28 0 67 3v78h-47q-42 0-42 38v60h86l-11 87h-75v224z"/>
    </symbol>
   <symbol id="youtube" viewBox="0 0 800 800">
      <path d="M400 224c144 0 201 2 224 25 17 17 26 52.125 26 151s-9 134-26 151c-23 23-80 25-224 25s-201-2-224-25c-17-17-26-52.125-26-151s9-134 26-151c23-23 80-25 224-25zm-52 100v141l135-70z"/>
    </symbol>
   <symbol id="instagram" viewBox="0 0 800 800">
      <path d="M400 309c-51 0-92 41-92 90s41 90 92 90 93-41 93-90-42-90-93-90zm178 56h-40c27 97-50 178-138 178s-164-82-137-178h-42v194c0 10 8 18 18 18h321c10 0 18-8 18-18V365zm-73-144c-11 0-21 10-21 21v49c0 11 10 21 21 21h52c11 0 21-10 21-21v-49c0-11-10-21-21-21h-52zm-276-51h342c32 0 59 27 59 59v342c0 32-27 59-59 59H229c-32 0-59-27-59-59V229c0-32 27-59 59-59z"/>
    </symbol>
</svg>

<div class="slider-content">
    <div class="header-wrapper">
      <div class="header">
        <div class="menu-wrapper">
          <div>
             <iframe src="https://cdpn.io/ouvidinpi/debug/gOpGbjP/VGrWNxZvaxEM" style="border: none; width: 900px"></iframe> 
          </div>
        </div>
        <div class="nav-wrapper">
          <nav>
            <ul>
              <li>Login</li>
              <li>BuscaWeb</li>
              <li>RPI</li>
            </ul>
          </nav>  
        </div>
        
      </div>
    </div>
  
  <div class="slider-wrapper">
    <div class="slider-container"> 
      <div class="control-nav">
        <ul>
          <li class="active"><span class="line"></span><span class="number">1</span></li>
          <li><span class="line"></span><span class="number">2</span></li>
          <li><span class="line"></span><span class="number">3</span></li>
          <li><span class="line"></span><span class="number">4</span></li>
          <li><span class="line"></span><span class="number">5</span></li>
          <li><span class="line"></span><span class="number">6</span></li>
          <li><span class="line"></span><span class="number">7</span></li>
        </ul>
      </div>
     <div class="lines-wrapper">
       <div class="croses">
         <span>+</span>
         <span>+</span>
         <span>+</span>
         <span>+</span>
       </div>
       <span class="vertical"></span>
       <span class="horizontal"></span>
       <span class="horizontal"></span>
       <span class="horizontal"></span>
       <span class="horizontal"></span>
      </div>
      <div class="image-mask">
        <img class="" src="http://www.inpi.gov.br/ouvid/pin-inpi-50-bg.png" alt="" />
      </div>
      <div class="slide active red" data-order="1" data-color="#EE4654" data-img="http://www.inpi.gov.br/ouvid/pin-inpi-50-bg.png">
        <div class="fake-bg red"></div>
        <canvas class="canvas" data-image="http://www.inpi.gov.br/ouvid/mask-red.jpg"></canvas>
        <div class="slide-content ">
           <div class="image-caption">
             <span class="line"></span> 
             <span>Marcas</span>
            </div>
          <div class="title-background">
            <span class="mask-wrap">
                <span class="mask">Marcas</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Marcas</span>
              </span>
          </div>
          <div class="title-wrapper">
            <h1>
              <span class="mask-wrap">
                <span class="mask"></span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Marcas</span>
              </span>
            </h1>
            <span class="gallery">Saiba Mais</span>
          </div>
        </div>
      </div>
     <div class="slide blue" data-order="2" data-color="#EE4654" data-img="http://www.inpi.gov.br/ouvid/pin-inpi-50-bg.png">
        <div class="fake-bg blue"></div>
        <canvas class="canvas" data-image="http://www.inpi.gov.br/ouvid/mask-blue.jpg"></canvas>
        <div class="slide-content ">
           <div class="image-caption">
             <span class="line"></span> 
             <span>Patentes</span>
            </div>
          <div class="title-background">
            <span class="mask-wrap">
                <span class="mask">Patentes</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Patentes</span>
              </span>
          </div>
          <div class="title-wrapper">
            <h1>
              <span class="mask-wrap">
                <span class="mask"></span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Patentes</span>
              </span>
            </h1>
            <span class="gallery">Saiba Mais</span>
          </div>
        </div>
      </div>
     <div class="slide green" data-order="3" data-color="#7ffe8e" data-img="http://www.inpi.gov.br/ouvid/pin-inpi-50-bg.png">
        <div class="fake-bg green"></div>
        <canvas class="canvas" data-image="http://www.inpi.gov.br/ouvid/mask-green.jpg"></canvas>
        <div class="slide-content ">
          <div class="image-caption">
             <span class="line"></span>
              <span>Desenhos Industriais</span>
            </div>
          <div class="title-background">
              <span class="mask-wrap">
                <span class="mask">Desenhos</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Industriais</span>
              </span>
          </div>
          <div class="title-wrapper">
            <h1>
               <span class="mask-wrap">
                <span class="mask">Desenhos</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Industriais</span>
              </span>
            </h1>
            <span class="gallery">Saiba Mais</span>
          </div>
          </div>
         </div>
     <div class="slide green" data-order="4" data-color="#7ffe8e" data-img="http://www.inpi.gov.br/ouvid/pin-inpi-50-bg.png">
        <div class="fake-bg green"></div>
        <canvas class="canvas" data-image="http://www.inpi.gov.br/ouvid/mask-green.jpg"></canvas>
        <div class="slide-content ">
          
          <div class="image-caption">
             <span class="line"></span>
              <span>Indicações Geográficas</span>
            </div>
          <div class="title-background">
              <span class="mask-wrap">
                <span class="mask">Indicações</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Geográficas</span>
              </span>
          </div>
          <div class="title-wrapper">
            <h1>
               <span class="mask-wrap">
                <span class="mask">Indicações</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Geográficas</span>
              </span>
            </h1>
            <span class="gallery">Saiba Mais</span>
          </div>
          </div>
         </div>
     <div class="slide green" data-order="5" data-color="#7ffe8e" data-img="http://www.inpi.gov.br/ouvid/pin-inpi-50-bg.png">
        <div class="fake-bg green"></div>
        <canvas class="canvas" data-image="http://www.inpi.gov.br/ouvid/mask-green.jpg"></canvas>
        <div class="slide-content ">
          <div class="image-caption">
             <span class="line"></span>
              <span>Programas de Computador</span>
            </div>
          <div class="title-background">
              <span class="mask-wrap">
                <span class="mask">Programas</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Computador</span>
              </span>
          </div>
          <div class="title-wrapper">
            <h1>
               <span class="mask-wrap">
                <span class="mask">Programas de</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Computador</span>
              </span>
            </h1>
            <span class="gallery">Saiba Mais</span>
          </div>
          </div>
         </div>
     <div class="slide green" data-order="6" data-color="#7ffe8e" data-img="http://www.inpi.gov.br/ouvid/pin-inpi-50-bg.png">
        <div class="fake-bg green"></div>
        <canvas class="canvas" data-image="http://www.inpi.gov.br/ouvid/mask-green.jpg"></canvas>
        <div class="slide-content ">
          <div class="image-caption">
             <span class="line"></span>
              <span>Topografias de Circuitos Integrados</span>
            </div>
          <div class="title-background">
              <span class="mask-wrap">
                <span class="mask">Topografias</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Circuitos</span>
              </span>
          </div>
          <div class="title-wrapper">
            <h1>
               <span class="mask-wrap">
                <span class="mask">Topografias de</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Circuitos Integrados</span>
              </span>
            </h1>
            <span class="gallery">Saiba Mais</span>
          </div>
         </div>
      </div>
      <div class="slide grey" data-order="7" data-color="#bcbcbc" data-img="http://www.inpi.gov.br/ouvid/pin-inpi-50-bg.png">
        <div class="fake-bg grey"></div>
        <canvas class="canvas" data-image="http://www.inpi.gov.br/ouvid/mask-grey.jpg"></canvas>
        <div class="slide-content ">
          <div class="image-caption">
             <span class="line"></span>
              <span>Contratos de Tecnologia e de Franquia</span>
            </div>
          <div class="title-background">
              <span class="mask-wrap">
                <span class="mask">Contratos</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Tecnologia</span>
              </span>
          </div>
          <div class="title-wrapper">
            <h1>
               <span class="mask-wrap">
                <span class="mask">Contratos de</span>
              </span>
              <span class="mask-wrap">
                <span class="mask">Tecnologia e de Franquia</span>
              </span>
            </h1>
            <span class="gallery">Saiba Mais</span>
          </div>
        </div>
      </div>
    </div>
  </div>
    <div class="social-icons">
      <ul>
        <li><a href="https://www.twitter.com/inpibrasil">
              <svg id="twitter-icon">
            <use xlink:href="#twitter"></use>
          </svg>
          </a></li>
        <li><a href="https://www.facebook.com/inpibrasil">
              <svg id="facebook-icon">
            <use xlink:href="#facebook"></use>
          </svg>
          </a></li>
        <li><a href="https://www.youtube.com/inpibr">
              <svg id="youtube-icon">
            <use xlink:href="#youtube"></use>
          </svg>
          </a></li>
        <li><a href="https://www.instagram.com/inpibrasil">
              <svg id="instagram-icon">
            <use xlink:href="#instagram"></use>
          </svg>
          </a></li>
      </ul>
  </div>
    <div class="footer-wrapper">
      <ul>
        <li class="active box" data-id="1">
          <div class="hover-box"></div>
          <div class="box-content">
            <span>Marcas</span>
          </div>
        </li>
        <li class="box" data-id="2">
           <div class="hover-box"></div>
          <div class="box-content">
            <span>Patentes</span>
          </div>
        </li>
        <li class="box" data-id="3" > 
          <div class="hover-box"></div>
          <div class="box-content">
          <span>Desenhos Industriais</span>
          </div>
        </li>
        <li class="box" data-id="4"  >
          <div class="hover-box"></div>
          <div class="box-content">
          <span>Indicações Geográficas</span>
          </div>
         </li>
        <li class="box" data-id="5"  >
          <div class="hover-box"></div>
          <div class="box-content">
          <span>Programas de Computador</span>
          </div>
         </li>
              <li class="box" data-id="6"  >
          <div class="hover-box"></div>
          <div class="box-content">
          <span>Topografias de Circuitos Integrados</span>
          </div>
         </li>
                <li class="box" data-id="7"  >
          <div class="hover-box"></div>
          <div class="box-content">
          <span>Contratos de Tecnologia e de Franquia</span>
          </div>
         </li>
      </ul>
    </div>
</div>
<script>
/*
You can check out original dribble shot here https://dribbble.com/shots/2375246-Fashion-Butique-slider-animation

Comments or suggestions are always appreciate it. 
*/



var mySlider = {
  
  config: {
    
    slider : '.slider-content',
    activeSlide : '.slide.active',
    footerButtons: '.footer-wrapper .box',
    bgPicture: '.image-mask img',
    nav : '.control-nav',
    position : {
        x: 350,
        alpha:1,
    },
   nextPosition :{
        x: 150,
        alpha:1,
    },
   
  
  },
  
   init : function(config) {
     
     this.canvasInit();
     $(mySlider.config.footerButtons).
            click(function() {
                mySlider.changeButton($(this));
            });
    },
   
  canvasInit : function() {
    
    var canvas = $('.canvas')[0];
    var ctx = canvas.getContext('2d');
    var w = $(mySlider.config.activeSlide).width();
    var h = $(mySlider.config.activeSlide).height();
    var img = document.createElement('IMG'); 
    img.src = "http://www.inpi.gov.br/ouvid/mask-red.jpg";
    var position = {
        x: 150,
        alpha:1,
    }
    
    if (window.matchMedia("(min-width: 860px)").matches) {
        position = {
            x: 200,
            alpha:1,
        }
    }
    
    if (window.matchMedia("(min-width: 1200px)").matches) {
        position = {
            x: 250,
            alpha:1,
        }
    }
    
    canvas.width = w;
    canvas.height = h;
    mySlider.drawMask(canvas, ctx, position, img);
    
  },
  
  drawMask : function(canvas, ctx, position,img) {
    
    var w = $(mySlider.config.activeSlide).width();
    var h = $(mySlider.config.activeSlide).height();
    var cy = 50;
    var mStroke = 25; 
    var mWidth = 180;
    var mHeight = 300;
    
    if (window.matchMedia("(min-width: 860px)").matches) {
      mStroke = 35; 
      cy = 80;
      mWidth = 260;
      mHeight = 380;
    }
    
    if (window.matchMedia("(min-width: 1200px)").matches) {
      
      mStroke = 40; 
      cy = 120;
      mWidth = 360;
      mHeight = 460;
    }

    ctx.globalAlpha=position.alpha;
    ctx.clearRect(0,0,w,h);
    ctx.save();
    ctx.beginPath();
    ctx.rect(position.x,cy,mWidth,mStroke);
    ctx.clip();
    ctx.drawImage(img,0,0, w, h);
    ctx.restore();
    
    ctx.save();
    ctx.rect(position.x, cy, mStroke, mHeight);
    ctx.clip();
    ctx.drawImage(img,0,0, w, h);
    ctx.restore();
    
    ctx.save();
    ctx.rect( position.x +mWidth, cy, mStroke, mHeight);
    ctx.clip();
     ctx.drawImage(img,0,0, w, h);
    ctx.restore();
    
    ctx.save();
    ctx.rect(position.x, cy + (mHeight-mStroke), mWidth, mStroke);
    ctx.clip();
    ctx.drawImage(img,0,0, w, h);
    ctx.restore();
    
  },
  
  changeSlide : function(id) {
   
   var activeSlide = $(mySlider.config.activeSlide);
   var newSlide = $(mySlider.config.slider).find('[data-order="'+id+'"]');
    
    this.animateSlide(activeSlide, newSlide);
    this.createMask(activeSlide, newSlide);
    
  },
  
  changeNav : function(id) {
    
    var activeNav = $(mySlider.config.nav).find('li');
    
    activeNav.removeClass('active');
    activeNav.eq(id-1).addClass('active');
    
  },
  
  changeButton : function(el) {
    
    var activeButton = $(mySlider.config.slider).find('.box.active');
    var target = el.data('id');
    
    if( !(el.hasClass('active')) ){
     
      activeButton.removeClass('active');
      el.addClass('active');
      this.changeSlide(target); 
      this.changeNav(target); 
    }
},
  
  createMask : function(active, newSlide) {
    
    var currentCanvas = active.find('.canvas')[0];
    var nextCanvas = newSlide.find('.canvas')[0];
    var position = mySlider.config.position;
    var positionNext =  mySlider.config.nextPosition;  
    
    var currentctx = currentCanvas.getContext('2d');
    var nextctx = nextCanvas.getContext('2d');
    
    var w = $(mySlider.config.activeSlide).width();
    var h = $(mySlider.config.activeSlide).height();
    
    var currentImg = document.createElement('IMG'); 
    var nextImg = document.createElement('IMG'); 
    var movex = 200;

    var position = {
        x: 350,
        alpha:1,
    }
   var nextPosition={
        x: 150,
        alpha:1,
    }
      
     TweenMax.set(positionNext, {x:"150"});
    
    if (window.matchMedia("(min-width: 860px)").matches) {
      
      position = {
         x: 400,
        alpha:1,
      };
      
      nextPosition = {
          x: 200,
          alpha:1,
      };
      
        movex = 200;
      
       TweenMax.set(positionNext, {x:"200"});
    }
    
    if (window.matchMedia("(min-width: 1200px)").matches) {
        position = {
         x: 450,
        alpha:1,
      };
      
      nextPosition = {
          x: 250,
          alpha:1,
      };
      
       movex = 200; 
       TweenMax.set(positionNext, {x:"250"});
    }
    
    currentImg.src = active.find('canvas').data('image');
    nextImg.src = newSlide.find('canvas').data('image');
    
    currentCanvas.width = nextCanvas.width = w;
    currentCanvas.height = nextCanvas.height = h;
     
    TweenMax.to(newSlide.find('.canvas'),0.3,{autoAlpha:1, delay:1.5});
    
    TweenMax.to(positionNext, 0.5, {x:"-="+movex+"", onUpdate: function() {
     
       mySlider.drawMask(currentCanvas, currentctx, positionNext, currentImg);

     },  onComplete: function() {
       
       TweenMax.to(active.find('.canvas'), 0.3, {autoAlpha:0}, "-=0.2");
       TweenMax.to(newSlide.find('.canvas'), 0.3, {autoAlpha:0}, "-=0.2");
     }});
    
    
    nextImg.onload = function() {
      mySlider.drawMask(nextCanvas, nextctx, positionNext, nextImg);
      
       TweenMax.to(position, 1, {x:"-="+movex+"", delay:1.3, onUpdate: function() {
     
           mySlider.drawMask(nextCanvas, nextctx, position, nextImg);

         }});
      
      console.log(position)
    }
    
  },
  
  animateSlide : function(active, newSlide) {
      
      var w = $(mySlider.config.slider).width();
      var backgroundImg = $(mySlider.config.bgPicture);
      var activeTitleBg = active.find('.title-background .mask-wrap');
      var activeMainTitle = active.find('.title-wrapper h1 .mask-wrap');
      var activeSlideContent = active.find('.slide-content'); 
      var activefakeBg = active.find('.fake-bg');
      var activeImageCaption = active.find('.image-caption');

      var newTitleBg = newSlide.find('.title-background .mask-wrap');
      var newTitle = newSlide.find('.title-wrapper h1 .mask-wrap');
      var newBgPicture = newSlide.data('img');
      var newfakeBg = newSlide.find('.fake-bg');
      var nextImageCaption = newSlide.find('.image-caption');
      var img = $('<img />')
      
      newSlide.addClass('next');
      
      activeMainTitle.addClass('mask-up')
      activeTitleBg.addClass('mask-down')
      activeImageCaption.addClass('mask-up');
      newTitle.addClass('mask-down');
      newTitleBg.addClass('mask-up');
      nextImageCaption.addClass('mask-down');
      
      
      TweenMax.set(activeSlideContent, {width:w});
      TweenMax.set(activefakeBg, {width:w});
      TweenMax.set(newfakeBg, {autoAlpha:0});
      
      TweenMax.to(active, 0.8, {width:'0%', ease: Power4.easeIn});
      TweenMax.to(activefakeBg, 0.3, {autoAlpha: 0, delay:0.4});
      TweenMax.to(backgroundImg, 0.3, {autoAlpha: 0, delay:0.4});
    
      setTimeout(function() {
        backgroundImg.remove();
        img.attr('src', newBgPicture).css('opacity',0);
        
        $('.image-mask').append(img);
        
      },600)
    
      TweenMax.to(newfakeBg, 0.5, {autoAlpha: 1, delay:1});
      TweenMax.to(img, 0.5, {autoAlpha: 1, delay:1});
      
      setTimeout(function() {
        newTitle.removeClass('mask-down');
        newTitleBg.removeClass('mask-up');
        
      },800);
      
    
      
      setTimeout(function() {
         active.removeClass('active');
         newSlide.addClass('active').removeClass('next');
         TweenMax.set(active, {width:'100%'});
         activeMainTitle.removeClass('mask-up');
         activeTitleBg.removeClass('mask-down');
        activeImageCaption.removeClass('mask-up');
        nextImageCaption.removeClass('mask-down');

      },1500)
  }
  
}

function debounce(func, wait, immediate) {
	var timeout;
	return function() {
		var context = this, args = arguments;
		var later = function() {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
};




$(document).ready(function() { 

mySlider.init(); 

var fn = debounce(function() {

	 mySlider.init()

}, 250);

$(window).on('resize', fn);

});
</script>
